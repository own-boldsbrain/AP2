; Configuração PJSIP simplificada para o laboratório de central de atendimento

[global]
type=global
user_agent=ContactCenterLab
endpoint_identifier_order=username,ip,anonymous

[transport-udp]
type=transport
protocol=udp
bind=0.0.0.0:5060
allow_reload=yes

; Emulador Android com softphone SIP
[android-softphone-auth]
type=auth
auth_type=userpass
username=6001
password=androidlab123

[android-softphone]
type=aor
max_contacts=3
remove_existing=yes

[android-softphone]
type=endpoint
transport=transport-udp
context=from-internal
disallow=all
allow=opus,ulaw,gsm
rtp_symmetric=yes
force_rport=yes
rewrite_contact=yes
auth=android-softphone-auth
aors=android-softphone
callerid="Android QA" <6001>

; Agente SIP de monitoramento local
[qa-agent-auth]
type=auth
auth_type=userpass
username=6002
password=qaagent123

[qa-agent]
type=aor
max_contacts=3
remove_existing=yes

[qa-agent]
type=endpoint
transport=transport-udp
context=from-internal
disallow=all
allow=opus,ulaw
auth=qa-agent-auth
aors=qa-agent
callerid="QA Agent" <6002>

; Tronco genérico para FreeSWITCH (opcional)
[freeswitch-trunk-auth]
type=auth
auth_type=userpass
username=lab-trunk
password=labtrunk123

[freeswitch-trunk]
type=aor
contact=sip:contact-center-freeswitch:5080
qualify_frequency=30

[freeswitch-trunk]
type=endpoint
context=from-internal
disallow=all
allow=opus,ulaw
direct_media=no
inband_progress=no
force_rport=yes
rewrite_contact=yes
outbound_auth=freeswitch-trunk-auth
aors=freeswitch-trunk

[freeswitch-trunk]
type=identify
endpoint=freeswitch-trunk
match=172.28.0.20/32
